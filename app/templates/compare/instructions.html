{% import "bootstrap/wtf.html" as wtf %}
{% import "bootstrap/utils.html" as utils %}
{% extends "base.html" %}
{% block title %}Instructions{% endblock %}
{% block content %}
<div class="card">
	<div class="card-body">
		<h1>HOW-TO</h1>
		<hr>
		<h2>MARCompare</h2>
		<p>This is a Flask-based webapp to compare MARC bibliographic records coming from (at least?) two different sources. It uses simple comparisons to point to which source has more data, which records are more complete, etc. For the moment the comparisons are simple "more is better" with visual cues to indicate which records have more data.</p>
		<hr>
		<h2>Input and processing: background</h2>
		<ul>
			<li>MARC files are uploaded as JSON files generated by MARCEdit, and must have originated as MARC XML files.</li>
			<li>This means for example that if the source file is a .mrc file it needs to be converted to XML and then to JSON. Since MARC files can use many different notations for fields and tags this simplifies the data parsing by making MARCEdit conform each file to a common format.</li>
			<li>While MARCEdit is consistent in conforming MARC XML files, it isn't always reliable good at stripping namespaces from XML tags (e.g. <marc:record> vs <record>). You need to tell the MARCompare whether to expect namespaces in each file, and also where to look for the OCLC number (001 or 035.</li>
			<li>You can also note the source of each batch (e.g. "UCLA" and "BERKELEY"), and also make a note about the comparison "session." For example, if you are processing a particular subset of records, you can say "This set is restricted to books published between 1600 and 1750."</li>
			<li>You can then perform various analyses on each "session." You can make an overal comparision showing which batch has more records with more data, and you can also compare field sets (for example, 1xx, 3xx, or 6xx).</li>
			<li>The analyses are stored in the local database, so while the initial processing can be sluggish, you only have to run the processing once.</li>
		</ul>
		<hr>
		<h2>Input and processing: instructions</h2>
		<ol type="1">
			<li>
					Prepare MARC files
					<ol type='a'>
						<li>For each batch, use MarcEdit to convert whatever your source file is into MARC XML.</li>
						<li>Then use MarcEdit to convert each of these XML files to JSON.</li>
					</ol>
			</li>
			<li>"Start a comparison"
				<ol type="a">
					<li>From the MARCompare Dashboard, click on "start a comparison"</li>
					<li>Make any notes you need about the current session ("These records are for incunabula").</li>
					<li>For each batch, upload the JSON file you created, and make a note about where each batch comes from.</li>
					<li>Hit submit!</li>
				</ol>
			</li>
			<li>Do some analyses
				<ol type="a">
					<li>From the "See your comparison sessions" menu, click on the ID of the session you want to look at.</li>
					<li>Before you do any other analyses you need to run the "overall batch analysis." This reads all the records into the database and gets each batch ready for more granular analysis.</li>
					<li>From the Analysis Menu, you can dig down into one of the available field set analyses: 1xx, 2xx, 3xx, 5xx, 6xx, 7xx</li>
					<li>Within any of the field set analyses you can compare a single row of records by clicking on the ID for the row.</li>
					<li>From the side-by-side record comparison, you can optionally pull down the most current OCLC version of the record (using a Z39.50 query behind the scenes).</li>
				</ol>
			</li>
			<li>Next steps
				<ol type='a'>
					<li>I'm hoping to add a couple of other features soon:</li>
					<li>Exporting comparison grids (by batch or by record) so you can use these comparisons in excel, as CSV, or what have you.</li>
					<li>Adding some more analyses that go beyond "more fields must mean better." For example, I'm working on a "custom" analysis where you can specify a particular MARC tag you want to compare (040, 245, 655, etc.)</li>
				</ol>
			</li>
		</ol>
	</div>
</div>
{% endblock %}
